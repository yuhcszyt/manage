"use strict";(function(a){if(typeof define==="function"&&define.amd){define(a)}else{window.DataBind=a()}})(function(){var l=(function(){var X={noMore:false},S=[];var J=function(ah){var ai={};return ah&&ai.toString.call(ah)=="[object Function]"};var O=function(ah){return ah%1===0};var V=function(ah){return Object.prototype.toString.call(ah)==="[object Array]"};var M=function(ai,ah){var am=[],al=[];if(!(typeof ai=="string")&&!(typeof ah=="string")&&!V(ai)&&!V(ah)){for(var ak in ai){if(!ah[ak]){am.push(ak)}}for(var aj in ah){if(!ai[aj]){al.push(aj)}}}return{added:am,removed:al}};var ac=function(ai){if(null==ai||"object"!=typeof ai){return ai}var aj=ai.constructor();for(var ah in ai){aj[ah]=ai[ah]}return aj};var Z=function(ak,aj,ah,am){try{Object.defineProperty(ak,aj,{get:ah,set:am,enumerable:true,configurable:true})}catch(ai){try{Object.prototype.__defineGetter__.call(ak,aj,ah);Object.prototype.__defineSetter__.call(ak,aj,am)}catch(al){throw"watchJS error: browser not supported :/"}}};var Q=function(ak,aj,ai){try{Object.defineProperty(ak,aj,{enumerable:false,configurable:true,writable:false,value:ai})}catch(ah){ak[aj]=ai}};var Y=function(){if(J(arguments[1])){T.apply(this,arguments)}else{if(V(arguments[1])){U.apply(this,arguments)}else{ag.apply(this,arguments)}}};var T=function(al,ah,an,ak){if((typeof al=="string")||(!(al instanceof Object)&&!V(al))){return}var aj=[];if(V(al)){for(var am=0;am<al.length;am++){aj.push(am)}}else{for(var ai in al){aj.push(ai)}}U(al,aj,ah,an,ak)};var U=function(ak,aj,ah,am,ai){if((typeof ak=="string")||(!(ak instanceof Object)&&!V(ak))){return}for(var al in aj){ag(ak,aj[al],ah,am,ai)}};var ag=function(aj,al,ah,ak,ai){if((typeof aj=="string")||(!(aj instanceof Object)&&!V(aj))){return}if(J(aj[al])){return}if(aj[al]!=null&&(ak===undefined||ak>0)){if(ak!==undefined){ak--}T(aj[al],ah,ak)}aa(aj,al,ah);if(ai){af(aj,al,ah,ak)}};var W=function(){if(J(arguments[1])){N.apply(this,arguments)}else{if(V(arguments[1])){R.apply(this,arguments)}else{ab.apply(this,arguments)}}};var N=function(ak,ah){if(ak instanceof String||(!(ak instanceof Object)&&!V(ak))){return}var aj=[];if(V(ak)){for(var al=0;al<ak.length;al++){aj.push(al)}}else{for(var ai in ak){aj.push(ai)}}R(ak,aj,ah)};var R=function(ak,aj,ah){for(var ai in aj){ab(ak,aj[ai],ah)}};var aa=function(ak,an,ai){var al=ak[an];L(ak,an);if(!ak.watchers){Q(ak,"watchers",{})}if(!ak.watchers[an]){ak.watchers[an]=[]}for(var aj in ak.watchers[an]){if(ak.watchers[an][aj]===ai){return}}ak.watchers[an].push(ai);var ah=function(){return al};var am=function(ap){var ao=al;al=ap;if(ak[an]){T(ak[an],ai)}L(ak,an);if(!X.noMore){if(JSON.stringify(ao)!==JSON.stringify(ap)){K(ak,an,"set",ap,ao);X.noMore=false}}};Z(ak,an,ah,am)};var K=function(al,am,ak,aj,ai){for(var ah in al.watchers[am]){if(O(ah)){al.watchers[am][ah].call(al,am,ak,aj,ai)}}};var P=["pop","push","reverse","shift","sort","slice","unshift"];var I=function(aj,ak,ai,ah){Q(aj[ak],ah,function(){var al=ai.apply(aj[ak],arguments);ag(aj,aj[ak]);if(ah!=="slice"){K(aj,ak,ah,arguments)}return al})};var L=function(aj,ak){if((!aj[ak])||(aj[ak] instanceof String)||(!V(aj[ak]))){return}for(var ai=P.length,ah;ai--;){ah=P[ai];I(aj,ak,aj[ak][ah],ah)}};var ab=function(ak,al,ai){for(var aj in ak.watchers[al]){var ah=ak.watchers[al][aj];if(ah==ai){ak.watchers[al].splice(aj,1)}}ae(ak,al,ai)};var ad=function(){for(var aj in S){var ah=S[aj];var ak=M(ah.obj[ah.prop],ah.actual);if(ak.added.length||ak.removed.length){if(ak.added.length){for(var ai in ah.obj.watchers[ah.prop]){U(ah.obj[ah.prop],ak.added,ah.obj.watchers[ah.prop][ai],ah.level-1,true)}}K(ah.obj,ah.prop,"differentattr",ak,ah.actual)}ah.actual=ac(ah.obj[ah.prop])}};var af=function(ai,ak,ah,aj){S.push({obj:ai,prop:ak,actual:ac(ai[ak]),watcher:ah,level:aj})};var ae=function(ak,al,ai){for(var aj in S){var ah=S[aj];if(ah.obj==ak&&ah.prop==al&&ah.watcher==ai){S.splice(aj,1)}}};setInterval(ad,50);X.watch=Y;X.unwatch=W;X.callWatchers=K;return X})();var E={};var b="databind-model-change";var p="databind-dom-change";var D="data-key";function w(I){return(I&&window.jQuery&&I instanceof window.jQuery)}function h(I){if(w(I)){return I[0]}return I}function u(O,L){if(!O){return undefined}var P=(L!==undefined);if(["checkbox","radio"].indexOf(O.type)>=0){if(P){O.checked=!!L}return O.checked}if(["hidden","text","textarea","select-one","email","url","week","time","search","tel","range","number","month","datetime-local","date","color"].indexOf(O.type)>=0){if(P){O.value=L}return O.value}if(["select-multiple"].indexOf(O.type)>=0){if(P){if(!k(L)){L=[L]}}var J=[];var K=O&&O.options;var N;for(var M=0,I=K.length;M<I;M++){N=K[M];if(P){if(L.indexOf(N.value)>-1){N.selected=true}else{N.selected=false}}if(N.selected){J.push(N.value||N.text)}}return J}if(P){O.innerText=L}return O.innerText}function k(I){return(Object.prototype.toString.call(I)==="[object Array]")}function m(I){return(typeof I=="string"||I instanceof String)}function C(I){if(["checkbox","radio","select-one","select-multiple"].indexOf(I.type)>=0){return"change"}if(["text","textarea"].indexOf(I.type)>=0){return"input"}}function a(I){if(!I.hashkey){I.hashkey=Date.now()+Math.floor(Math.random()*100000)}return I.hashkey}function i(K,J){if(!K||!J){return}var L=a(K);E[L]=E[L]||[];if(E[L].indexOf(J)>-1){return}E[L].push(J);var I=C(K);K.addEventListener(I,J,false)}function g(L,K){var M=a(L);var I=E[M].indexOf(K);if(!E[M]||I===-1){return}E[M].splice(I,1);var J=C(L);L.removeEventListener(J,K,false)}function d(M){var N=a(M);var L=E[N];if(!M||!L){return}var K=L.concat();var J,I=K.length;for(J=0;J<I;J++){g(M,K[J])}}function e(I,L){var M=L.split(".");var K=I;var J;for(J=0;J<M.length;J++){if(!K.hasOwnProperty(M[J])){return false}K=K[M[J]]}return true}function s(I,L){var M=L.split(".");var K=I;var J;for(J=0;J<M.length-1;J++){K=K[M[J]]}return K}function r(K,L,J){var M=L.split(".");var I=s(K,L);if(J!==undefined){I[M[M.length-1]]=J}return I[M[M.length-1]]}function j(L,J,I){var K=(function(P,N,M,O,Q,T,S,R){return function(X){var V=Q(this);var W=T(this);var U=O(N,M);O(N,M,V);S(R,this,{key:W,oldValue:U,newValue:V})}})(L,J,I,r,u,n,G,p);i(L,K)}function q(I){d(I)}function t(L,J,I){var K=(function(P,O,N,Q,S,R,M){return function(V,W,U,T){var V=R(P);Q(P,U);S(M,P,{key:V,oldValue:T,newValue:U})}})(L,J,I,u,G,n,b);l.watch(J,I,K)}function o(J,I){var L=J.watchers[I];var K;for(K=0;K<L.length;K++){l.unwatch(J,I,L[K])}}function n(I){if(!I){return}return I.getAttribute(D)}function B(I){I=I||{};I={dom:(I.dom!==undefined)?I.dom:true,model:(I.model!==undefined)?I.model:true,children:(I.children!==undefined)?I.children:true};return I}function z(M,K){if(!M||!K){return{}}var L=n(M);if(!L){return{}}var N=e(K,L);var J=s(K,L);var I=L.split(".");I=I[I.length-1];return{key:L,deepKey:I,deepModel:J,keyExists:N}}function H(L,J,I){if(!L||!J){return false}var K=z(L,J);if(!K.keyExists){return false}if(L.boundModel){return true}L.boundModel=J;var M=r(J,K.key);u(L,M);if(I.dom){j(L,K.deepModel,K.deepKey)}if(I.model){t(L,K.deepModel,K.deepKey)}return true}function v(L,J,I){if(!L||!J){return}var K=z(L,J);if(!K.keyExists){return}if(I.dom){q(L)}if(I.model){o(K.deepModel,K.deepKey)}}function y(M,I){var L=[M],K,J;if(I.children){K=M.getElementsByTagName("*");for(J=0;J<K.length;J++){L.push(K[J])}}return L}function G(J,K,L){var I=document.createEvent("Events");I.initEvent(J,true,true);I.data=L;K.dispatchEvent(I)}function x(L,R,M,N){var J=[];function I(T,S){J.push(S);if(N.dom){T.addEventListener(M,S,false)}if(N.model){T.addEventListener(R,S,false)}}function Q(U,T){var S=J.indexOf(T);if(S===-1){return}J.splice(S,1);if(N.dom){U.removeEventListener(p,T,false)}if(N.model){U.removeEventListener(b,T,false)}}function K(U){var T,S=J.concat();for(T=0;T<S.length;T++){Q(U,S[T])}}function O(T){var S;for(S=0;S<L.length;S++){I(L[S],T)}}function P(T){var S,U=Q;if(T===undefined){U=K}for(S=0;S<L.length;S++){U(L[S],T)}}return{watch:O,unwatch:P}}function F(K,N,O){if(!K||!N){return}var J=h(K);if(J!==K){arguments[0]=J;return F.apply(this,arguments)}O=B(O);var P=y(K,O);var M;var Q,I=[];for(M=0;M<P.length;M++){Q=H(P[M],N,{dom:O.dom,model:O.model});if(Q){I.push(P[M])}}var L=new x(I,b,p,O);K.watchable=L;return L}function f(M,K,I){if(!M||!K){return}var N=h(M);if(N!==M){arguments[0]=N;return f.apply(this,arguments)}I=B(I);var J=y(M,I);var L;for(L=0;L<J.length;L++){v(J[L],K,{dom:I.dom,model:I.model})}M.watchable.unwatch()}function c(L,Q,N){if(!L||!Q||!N){return}if(!window.Handlebars){console.warn("To use DataBind.bindTemplate you need to include Handlebars.js on your page");return}var P;var K=h(L);if(K!==L){arguments[0]=K;return c.apply(this,arguments)}if(!m(Q)){K=h(Q);if(K!==Q){arguments[1]=K;return c.apply(this,arguments)}P=K.innerHTML}else{P=Q}if(Handlebars.compile){var O=Handlebars.compile(P)}function J(T,R,S){return function(){T.innerHTML=R(S)}}var I=J(L,O,N);I();var M=F(L,N);l.watch(N,I);return M}function A(K,J,I){var L=h(K);if(L!==K){arguments[0]=L;return A.apply(this,arguments)}f(K,I);K.watchable.unwatch();l.unwatch(I)}return{bind:F,unbind:f,bindTemplate:c,unbindTemplate:A}});